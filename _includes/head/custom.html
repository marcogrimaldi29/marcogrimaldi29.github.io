<!-- Custom head includes -->

<!-- Custom Favicons -->
<link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/favicon-16x16.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/favicon-32x32.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="48x48" href="{{ '/assets/images/favicon-48x48.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="64x64" href="{{ '/assets/images/favicon-64x64.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="128x128" href="{{ '/assets/images/favicon-128x128.png' | relative_url }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/favicon-180x180.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="192x192" href="{{ '/assets/images/favicon-192x192.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="256x256" href="{{ '/assets/images/favicon-256x256.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="512x512" href="{{ '/assets/images/favicon-512x512.png' | relative_url }}">

<!-- Make masthead visually identical to page background -->
<style>
  /* base sticky behaviour */
  .masthead {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: transparent !important;   /* start transparent, JS will set exact color */
    box-shadow: none !important;          /* remove shadow / contour */
    border: none !important;              /* remove any border */
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
    transition: padding 0.22s ease, background-color 0.22s ease;
  }

  /* make sure internal header parts don't add their own background/borders */
  .masthead .masthead__inner-wrap,
  .masthead .masthead__menu,
  .masthead .site-title,
  .masthead .visible-links,
  .masthead .greedy-nav {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  /* optional slight shrink on scroll but without changing background or adding shadow */
  .masthead.shrink {
    padding: 0.35rem 1rem;
  }

  /* remove any focus outline coming from header elements (keeps a clean contour) */
  .masthead *:focus {
    outline: none;
  }
</style>

<script>
  // Apply the exact computed background color of the page/container to the masthead
  document.addEventListener("DOMContentLoaded", function () {
    const masthead = document.querySelector(".masthead");
    if (!masthead) return;

    // Prefer the main content container so header matches the site area exactly.
    // Fallback to document.body if that container is not present.
    const container = document.querySelector(".initial-content") || document.querySelector("body");
    const containerStyle = window.getComputedStyle(container);
    const bg = containerStyle.backgroundColor || containerStyle.background || "transparent";

    // Apply the computed background color and ensure no shadow/border remains
    masthead.style.background = bg;
    masthead.style.boxShadow = "none";
    masthead.style.border = "none";

    // shrink behavior (keeps background identical)
    function onScroll() {
      if (window.scrollY > 20) masthead.classList.add("shrink");
      else masthead.classList.remove("shrink");
    }
    document.addEventListener("scroll", onScroll, { passive: true });
    onScroll();
  });
</script>

<!-- External links in new tabs -->
<script>
(function() {
  document.addEventListener("DOMContentLoaded", function() {
    const currentHost = window.location.hostname;
    document.querySelectorAll("a[href]").forEach(link => {
      if (link.hostname && link.hostname !== currentHost) {
        link.setAttribute("target", "_blank");
        link.setAttribute("rel", "noopener noreferrer");
      }
    });
  });
})();
</script>

